(function(t){function e(e){for(var n,s,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&p.push(o[s][0]),o[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);l&&l(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,i=1;i<r.length;i++){var c=r[i];0!==o[c]&&(n=!1)}n&&(a.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},o={app:0},a=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"034f":function(t,e,r){"use strict";r("85ec")},"0f0d":function(t,e,r){"use strict";r("7bb1")},"56d7":function(t,e,r){"use strict";r.r(e);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",[r("el-header",{directives:[{name:"show",rawName:"v-show",value:t.showNav,expression:"showNav"}],staticStyle:{padding:"0","background-color":"#545c64"}},[r("el-row",[r("el-col",{attrs:{xs:20,sm:18,md:16}},[r("el-menu",{attrs:{mode:"horizontal","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b",router:"","default-active":t.currentPath}},t._l(t.menu,(function(e){return r("el-menu-item",{key:e.path,attrs:{index:e.path}},["cart"===e.name?r("el-badge",{staticClass:"cart-badge",attrs:{value:t.cartCount}},[r("i",{class:e.icon}),t._v(" "+t._s(e.text)+" ")]):[r("i",{class:e.icon}),t._v(" "+t._s(e.text)+" ")]],2)})),1)],1),r("el-col",{staticStyle:{"padding-right":"10px","text-align":"right","line-height":"60px"},attrs:{xs:4,sm:6,md:8}},[t.isLogin?[r("strong",{staticStyle:{color:"#fff","margin-right":"5px"}},[t._v(t._s(t.userInfo.username))]),r("el-button",{attrs:{type:"text"},on:{click:t.logout}},[t._v("退出")])]:[r("el-button",{attrs:{type:"text"},on:{click:function(e){return t.goto("/reg")}}},[t._v("注册")]),r("el-button",{attrs:{type:"text"},on:{click:function(e){return t.goto("/login")}}},[t._v("登录")])]],2)],1)],1),r("el-header",{directives:[{name:"show",rawName:"v-show",value:!t.showNav,expression:"!showNav"}]},[r("el-button",{attrs:{icon:"el-icon-arrow-left",circle:""},on:{click:t.goBack}})],1),r("el-main",{staticStyle:{overflow:"hidden"}},[r("keep-alive",{attrs:{include:"Discover,Search"}},[r("router-view")],1)],1)],1)},a=[],s=r("53ca"),i=r("5530"),c=r("2f62"),u=(Object(c["c"])(["count"]),{name:"App",data:function(){return{menu:[{path:"/home",name:"home",icon:"el-icon-s-home",text:"首页"},{path:"/discover",name:"discover",icon:"el-icon-view",text:"发现"},{path:"/cart",name:"cart",icon:"el-icon-shopping-cart-2",text:"购物车"},{path:"/mine",icon:"el-icon-user",name:"mine",text:"我的"}],currentPath:"/home"}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(c["c"])({cartCount:"count"})),Object(c["c"])("user",["isLogin"])),Object(c["e"])({showNav:function(t){return t.common.showNav}})),Object(c["e"])("user",{userInfo:function(t){return t.userInfo}})),components:{},methods:Object(i["a"])(Object(i["a"])({goto:function(t){"object"===Object(s["a"])(t)?this.$router.push({path:t.path}):this.$router.push(t),this.currentPath=t.path},goBack:function(){this.$router.back()}},Object(c["d"])("user",{logout:function(t,e){t("logout")}})),Object(c["b"])({mytest:function(t,e){t("test")}})),created:function(){var t=this.$route.path;this.currentPath=t}}),l=u,d=(r("034f"),r("2877")),p=Object(d["a"])(l,o,a,!1,null,null,null),m=p.exports,f=r("8c4f"),g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-carousel",{attrs:{height:"150px"}},t._l(t.recommendList,(function(e){return r("el-carousel-item",{key:e._id},[r("img",{attrs:{src:t.baseUrl+e.img_url}})])})),1),r("h3",[t._v("最新商品")]),r("el-row",{attrs:{gutter:20}},t._l(t.newList,(function(e){return r("el-col",{key:e._id,attrs:{span:6}},[r("img",{attrs:{src:t.baseUrl+e.img_url},on:{click:function(r){return t.goto(e._id)}}}),r("h4",[t._v(t._s(e.goods_name))]),r("p",{staticClass:"price"},[r("del",[t._v(t._s(e.price))]),r("span",[t._v(t._s(e.sales_price))])]),r("p",[t._v("销量："+t._s(e.sales_qty))])])})),1)],1)},h=[],v=r("1da1"),b=(r("96cf"),r("bc3a")),_=r.n(b),y="http://120.76.247.5:2003",w=y+"/api",x=_.a.create({baseURL:w,withCredentials:!0});x.get=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){var n,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{},t.next=3,x(e,Object(i["a"])(Object(i["a"])({},n),{},{params:r,method:"get"}));case 3:return o=t.sent,a=o.data,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),x.post=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){var n,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{},t.next=3,x(e,Object(i["a"])(Object(i["a"])({},n),{},{data:r,method:"post"}));case 3:return o=t.sent,a=o.data,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),x.delete=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){var n,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{},t.next=3,x(e,Object(i["a"])(Object(i["a"])({},n),{},{params:r,method:"delete"}));case 3:return o=t.sent,a=o.data,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),x.put=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){var n,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{},t.next=3,x(e,Object(i["a"])(Object(i["a"])({},n),{},{data:r,method:"put"}));case 3:return o=t.sent,a=o.data,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}(),x.patch=function(){var t=Object(v["a"])(regeneratorRuntime.mark((function t(e,r){var n,o,a,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=s.length>2&&void 0!==s[2]?s[2]:{},t.next=3,x(e,Object(i["a"])(Object(i["a"])({},n),{},{data:r,method:"patch"}));case 3:return o=t.sent,a=o.data,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}();var $=x,j={name:"Home",data:function(){return{recommendList:[],newList:[],baseUrl:y}},methods:{goto:function(t){this.$router.push({name:"goods",params:{id:t,username:"test",age:18},query:{id:t,from:"home"}})}},created:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var r,n,o,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$request.get("/goods",{sort:"price",size:3,total:!1});case 2:return r=e.sent,n=r.data,t.recommendList=n,e.next=7,t.$request.get("/goods",{total:!1});case 7:o=e.sent,a=o.data,t.newList=a;case 10:case"end":return e.stop()}}),e)})))()},beforeRouteLeave:function(t,e,r){console.log("Home.beforeRouteLeave"),r()}},k=j,O=(r("878b"),Object(d["a"])(k,g,h,!1,null,"03cd6ba9",null)),q=O.exports,D=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("用户注册")]),r("el-form",{ref:"ruleForm",attrs:{model:t.formData,rules:t.rules,"label-width":"100px","status-icon":""}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password","show-password":""},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),r("el-form-item",{attrs:{label:"验证码",prop:"vcode"}},[r("el-input",{scopedSlots:t._u([{key:"append",fn:function(){return[r("span",{staticClass:"vcode",domProps:{innerHTML:t._s(t.imgvcode)},on:{click:t.getVcode}})]},proxy:!0}]),model:{value:t.formData.vcode,callback:function(e){t.$set(t.formData,"vcode",e)},expression:"formData.vcode"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("免费注册")])],1)],1)],1)},S=[],R=function(t,e,r){this.$request.get("/user/check",{username:e}).then((function(t){400===t.code?r(new Error("用户名已存在")):200===t.code&&r()}))},L={name:"Reg",data:function(){return R=R.bind(this),{imgvcode:"",formData:{username:"",password:"",vcode:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:5,max:20,message:"用户名长度必须为 5 到 20 个字符",trigger:"blur"},{validator:R,trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:30,message:"密码长度必须为 6 到 30 个字符",trigger:"blur"}]}}},methods:{submitForm:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(console.log("valid",e),e){var r=t.formData,n=r.username,o=r.password,a=r.vcode;t.$request.post("/reg",{username:n,password:o,vcode:a}).then((function(e){200===e.code?t.$router.push("/login"):401===e.code&&t.$message.error("验证码错误")}))}}))},getVcode:function(){var t=this;this.$request.get("/vcode/picture").then((function(e){t.imgvcode=e.data}))}},created:function(){console.log("Reg=",this),this.getVcode()}},P=L,E=(r("6e34"),Object(d["a"])(P,D,S,!1,null,null,null)),C=E.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("h1",[t._v("用户登录")]),r("el-form",{ref:"ruleForm",attrs:{model:t.formData,rules:t.rules,"label-width":"100px","status-icon":""}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:t.formData.username,callback:function(e){t.$set(t.formData,"username",e)},expression:"formData.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{attrs:{type:"password","show-password":""},model:{value:t.formData.password,callback:function(e){t.$set(t.formData,"password",e)},expression:"formData.password"}})],1),r("el-form-item",{attrs:{label:"验证码",prop:"vcode"}},[r("el-input",{scopedSlots:t._u([{key:"append",fn:function(){return[r("span",{staticClass:"vcode",domProps:{innerHTML:t._s(t.imgvcode)},on:{click:t.getVcode}})]},proxy:!0}]),model:{value:t.formData.vcode,callback:function(e){t.$set(t.formData,"vcode",e)},expression:"formData.vcode"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.submitForm}},[t._v("登录")])],1)],1)],1)},z=[],F={name:"Login",data:function(){return{imgvcode:"",formData:{username:"",password:"",vcode:""},rules:{username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],vcode:[{required:!0,message:"请求输入验证码",trigger:"blur"}]}}},methods:{submitForm:function(){var t=this;this.$refs.ruleForm.validate((function(e){if(console.log("valid",e),e){var r=t.formData,n=r.username,o=r.password,a=r.vcode;t.$request.post("/login",{username:n,password:o,vcode:a}).then((function(e){if(200===e.code){var r=t.$route.query.targetUrl,n=void 0===r?"/mine":r;t.$store.commit("user/login",e.data),t.$router.push(n)}else 401===e.code&&t.$message.error("验证码错误")}))}}))},getVcode:function(){var t=this;this.$request.get("/vcode/picture").then((function(e){t.imgvcode=e.data}))}},created:function(){console.log("Login=",this),this.getVcode()}},I=F,M=(r("d6db"),Object(d["a"])(I,N,z,!1,null,null,null)),U=M.exports,G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" Mine "),r("List",{attrs:{datalist:["laoxie","jingjing","tiantian"],price:100,index:"10"}}),r("List",{attrs:{datalist:["javascript","html","css","php","nodejs"],price:200}}),r("List",{attrs:{datalist:["hello everybody"]}}),r("List",{attrs:{datalist:[10,20,30],age:"22"}})],1)},Q=[],A=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" List "),r("ul",t._l(t.datalist,(function(e,n){return r("li",{key:e+n},[t._v(t._s(e))])})),0),r("p",[t._v(" 价格："+t._s(t.price.toFixed(2))+" ")]),r("p",[t._v(" 索引值："+t._s(t.index)+" ")])])},T=[],V=(r("a9e3"),{name:"List",props:{datalist:{type:Array,required:!0},price:{type:Number,default:100},index:{type:[Number,String],default:1},age:{type:[Number,String],validator:function(t){return t>=18&&t<=30}}},data:function(){return{}}}),H=V,B=Object(d["a"])(H,A,T,!1,null,null,null),J=B.exports,K={name:"Mine",data:function(){return{}},components:{List:J}},W=K,X=Object(d["a"])(W,G,Q,!1,null,null,null),Y=X.exports,Z=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-container",[r("el-aside",{attrs:{width:"200px"}},[r("el-menu",{attrs:{"default-active":t.currentPath,router:""},on:{select:t.changeMenu}},t._l(t.menu,(function(e){return r("el-menu-item",{key:e._id,attrs:{index:t.parentPath+"/"+e.name}},[t._v(" "+t._s(e.text)+" ")])})),1)],1),r("el-main",[r("el-row",{attrs:{gutter:20}},t._l(t.goodslist.result,(function(e){return r("el-col",{key:e._id,attrs:{xs:12,sm:8,md:6}},[r("img",{attrs:{src:e.img_url},on:{click:function(r){return t.goto(e._id)}}}),r("h4",[t._v(t._s(e.goods_name))]),r("p",{staticClass:"price"},[r("del",[t._v(t._s(e.price))]),r("span",[t._v(t._s(e.sales_price))])]),r("p",[t._v("销量："+t._s(e.sales_qty))])])})),1),r("el-pagination",{attrs:{background:"",layout:"total, prev, pager, next,sizes",total:t.goodslist.total,"page-size":8,"page-sizes":[8,16,32,48]},on:{"current-change":t.changePage,"size-change":t.changeSize}})],1)],1)},tt=[],et=(r("7db0"),r("b0c0"),r("d81d"),{name:"Discover",data:function(){return{menu:[],parentPath:"/discover",currentPath:"/discover/man",goodslist:{},page:1,size:8}},watch:{$route:function(t,e){var r=t.params.cat;this.getData(r)}},methods:{changeMenu:function(t){console.log("index=",t),this.currentPath=t},getData:function(t){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var n,o,a,s,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n=e.size,o=e.page,a=t||e.$route.params.cat,s=e.menu.find((function(t){return t.name===a})),s){r.next=5;break}return r.abrupt("return");case 5:return r.next=7,e.$request.get("/goods",{category:s.text,size:n,page:o});case 7:i=r.sent,c=i.data,console.log("goodslist=",c),e.goodslist=c,e.goodslist.result=e.goodslist.result.map((function(t){return t.img_url=e.baseUrl+t.img_url,t}));case 12:case"end":return r.stop()}}),r)})))()},changePage:function(t){console.log("page=",t),this.page=t,this.getData()},changeSize:function(t){this.size=t,this.getData()},goto:function(t){console.log("id",t),this.$router.push({name:"goods",params:{id:t}})}},created:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Discover.created"),e.next=3,t.$request.get("/category",{total:!1});case 3:r=e.sent,n=r.data,console.log("categories=",n),t.menu=n,t.getData();case 8:case"end":return e.stop()}}),e)})))()},destroyed:function(){console.log("Discover.destroyed")},activated:function(){console.log("Discover.activated")},deactivated:function(){console.log("Discover.deactivated")}}),rt=et,nt=(r("97a8"),Object(d["a"])(rt,Z,tt,!1,null,"23fe4138",null)),ot=nt.exports,at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("el-steps",{attrs:{active:1,"finish-status":"success"}},[r("el-step",{attrs:{title:"购物车"}}),r("el-step",{attrs:{title:"结算"}}),r("el-step",{attrs:{title:"购物完成"}})],1),r("el-table",{ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.goodslist,"tooltip-effect":"dark"}},[r("el-table-column",{attrs:{type:"selection",width:"50"}}),r("el-table-column",{attrs:{type:"index",width:"30"}}),r("el-table-column",{attrs:{prop:"img_url",label:"商品图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("img",{staticStyle:{width:"60px"},attrs:{src:n.img_url},on:{click:function(e){return t.goto(n._id)}}})]}}])}),r("el-table-column",{attrs:{label:"商品信息","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("h4",[t._v(t._s(n.goods_name))]),r("p",{staticClass:"price"},[r("del",[t._v(t._s(n.price))]),r("span",[t._v(t._s(n.sales_price))])]),r("el-input-number",{staticStyle:{width:"80px"},attrs:{value:n.qty,"controls-position":"right",size:"mini",min:1,max:5},on:{change:function(e){return t.changeQty(n._id,e)}}})]}}])}),r("el-table-column",{attrs:{width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[r("el-button",{attrs:{size:"mini",type:"danger",plain:"",icon:"el-icon-delete",circle:""},on:{click:function(e){return t.remove(n._id)}}})]}}])})],1),r("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[r("el-col",{attrs:{span:12}},[r("el-button",{attrs:{type:"danger",plain:""},on:{click:t.clear}},[t._v("清空购物车")])],1),r("el-col",{staticStyle:{"text-align":"right"},attrs:{span:12}},[r("span",{staticClass:"price",staticStyle:{"margin-right":"20px"}},[r("span",[t._v(t._s(t.totalPrice))])]),r("el-button",{attrs:{type:"success",size:"large"}},[t._v("去结算")])],1)],1)],1)},st=[],it=(r("b680"),{name:"Cart",data:function(){return{}},computed:{totalPrice:function(){return this.$store.getters.totalPrice.toFixed(2)},goodslist:function(){return this.$store.state.cart.cartlist}},methods:{changeQty:function(t,e){console.log("changeQty",t,e),this.$store.dispatch("changeGoodsQtyAsync",{id:t,qty:e})},remove:function(t){this.$store.commit("removeCart",t)},clear:function(){this.$store.commit("clearCart")},goto:function(t){console.log("goto=",t),this.$router.push("/goods/"+t)}}}),ct=it,ut=Object(d["a"])(ct,at,st,!1,null,null,null),lt=ut.exports,dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.goods._id?r("div",[r("img",{attrs:{src:t.goods.img_url}}),r("h1",[t._v(t._s(t.goods.goods_name))]),r("p",{staticClass:"price"},[r("del",[t._v(t._s(t.goods.price.toFixed(2)))]),r("span",[t._v(t._s(t.goods.sales_price.toFixed(2)))])]),r("p",[t._v("销量："+t._s(t.goods.sales_qty))]),r("el-button",{attrs:{type:"warning",icon:"el-icon-shopping-cart-full",disabled:t.goods.inventory<1},on:{click:t.add2cart}},[t._v("添加购物车")]),r("el-button",{attrs:{type:"danger",icon:"el-icon-shopping-bag-2",disabled:t.goods.inventory<1},on:{click:t.buynow}},[t._v("立即购买")]),r("h3",[t._v("最新商品")]),r("el-row",{attrs:{gutter:20}},t._l(t.hotList,(function(e){return r("el-col",{key:e._id,attrs:{xs:12,sm:8,md:6}},[r("img",{attrs:{src:t.baseUrl+e.img_url},on:{click:function(r){return t.goto(e._id)}}}),r("h4",[t._v(t._s(e.goods_name))]),r("p",{staticClass:"price"},[r("del",[t._v(t._s(e.price))]),r("span",[t._v(t._s(e.sales_price))])]),r("p",[t._v("销量："+t._s(e.sales_qty))])])})),1)],1):r("div",{directives:[{name:"loading",rawName:"v-loading.body",value:!0,expression:"true",modifiers:{body:!0}}],attrs:{"element-loading-text":"拼命加载中"}})},pt=[],mt={name:"Goods",data:function(){return{goods:{},hotList:[]}},computed:{cartlist:function(){return this.$store.state.cart.cartlist}},beforeRouteUpdate:function(t,e,r){this.getData(t.params.id),r()},beforeRouteEnter:function(t,e,r){r()},beforeRouteLeave:function(t,e,r){r()},created:function(){var t=this;return Object(v["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.getData(),e.next=3,t.$request.get("/goods",{total:!1,sort:"sales_qty"});case 3:r=e.sent,n=r.data,t.hotList=n,t.$store.commit("displayNav",!1);case 7:case"end":return e.stop()}}),e)})))()},destroyed:function(){this.$store.commit("displayNav",!0)},methods:{goto:function(t){this.$router.push("/goods/".concat(t))},getData:function(t){var e=this;return Object(v["a"])(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t=t||e.$route.params.id,r.next=3,e.$request.get("/goods/"+t);case 3:n=r.sent,o=n.data,o.img_url=e.baseUrl+o.img_url,o.big_img_url=e.baseUrl+o.big_img_url,e.goods=o;case 8:case"end":return r.stop()}}),r)})))()},add2cart:function(){var t=this.goods._id,e=this.cartlist.find((function(e){return e._id===t}));if(e)this.$store.commit("changeGoodsQty",{id:t,qty:e.qty+1});else{var r=Object(i["a"])(Object(i["a"])({},this.goods),{},{qty:1});this.$store.commit("addToCart",r)}},buynow:function(){this.add2cart(),this.$router.push("/cart")}}},ft=mt,gt=(r("0f0d"),Object(d["a"])(ft,dt,pt,!1,null,"bc14584e",null)),ht=gt.exports,vt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" copyright © 千锋 ˙ 广州H5 ")])},bt=[],_t={name:"Footer",data:function(){return{}}},yt=_t,wt=Object(d["a"])(yt,vt,bt,!1,null,null,null),xt=(wt.exports,function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)}),$t=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" 你访问的页面不存在，猜你喜欢 "),r("div",[t._v("游戏广告")]),r("div",[t._v("汽车广告")]),r("div",[t._v("美女广告")])])}],jt={name:"Footer",data:function(){return{}}},kt=jt,Ot=Object(d["a"])(kt,xt,$t,!1,null,null,null),qt=Ot.exports,Dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" Search "),r("el-input",{attrs:{placeholder:"请输入搜索内容"},scopedSlots:t._u([{key:"append",fn:function(){return[r("el-button",{attrs:{type:"success",icon:"el-icon-search"},on:{click:t.search}})]},proxy:!0}]),model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}})],1)},St=[],Rt={name:"Search",data:function(){return{keyword:"",result:[]}},methods:{search:function(){var t=this;this.$request.get("/goods/search",{keyword:this.keyword}).then((function(e){var r=e.data;console.log("data=",r),t.result=r.result}))}}},Lt=Rt,Pt=Object(d["a"])(Lt,Dt,St,!1,null,null,null),Et=Pt.exports,Ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" Man ")])},Nt=[],zt={name:"Man",data:function(){return{}}},Ft=zt,It=Object(d["a"])(Ft,Ct,Nt,!1,null,null,null),Mt=(It.exports,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" Girl ")])}),Ut=[],Gt={name:"Girl",data:function(){return{}}},Qt=Gt,At=Object(d["a"])(Qt,Mt,Ut,!1,null,null,null),Tt=(At.exports,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[t._v(" Boy ")])}),Vt=[],Ht={name:"Boy",data:function(){return{}}},Bt=Ht,Jt=Object(d["a"])(Bt,Tt,Vt,!1,null,null,null),Kt=(Jt.exports,localStorage.getItem("userInfo"));try{Kt=JSON.parse(Kt)||{}}catch(ae){Kt={}}var Wt={namespaced:!0,state:{userInfo:Kt},getters:{isLogin:function(t,e,r,n){return!!t.userInfo._id}},mutations:{login:function(t,e){t.userInfo=e,localStorage.setItem("userInfo",JSON.stringify(e))},logout:function(t,e){t.userInfo={},localStorage.removeItem("userInfo")}},actions:{test:function(t,e){t.dispatch("test2"),t.commit("add",null,{root:!0}),t.dispatch("add2",null,{root:!0})},test2:function(){}}},Xt=(r("4de4"),r("5c96")),Yt=r.n(Xt),Zt={state:{cartlist:[]},getters:{totalPrice:function(t){return t.cartlist.reduce((function(t,e){return t+e.sales_price*e.qty}),0)},count:function(t){return t.cartlist.length}},mutations:{addToCart:function(t,e){t.cartlist.unshift(e)},removeCart:function(t,e){t.cartlist=t.cartlist.filter((function(t){return t._id!=e}))},clearCart:function(t){t.cartlist=[]},changeGoodsQty:function(t,e){var r=e.id,n=e.qty;console.log("changeGoodsQty",r,n),t.cartlist=t.cartlist.map((function(t){return t._id==r&&(t.qty=n),t}))}},actions:{changeGoodsQtyAsync:function(t,e){var r=e.id,n=e.qty;$.get("/goods/"+r).then((function(e){var o=e.data;console.log("inventory=",r,n,o.inventory),n>o.inventory&&(n=o.inventory,Object(Xt["Message"])({type:"warning",message:"库存不足，最大能购买".concat(o.inventory,"个商品")})),t.commit("changeGoodsQty",{id:r,qty:n})}))}}},te={state:{showNav:!0},getters:{},mutations:{displayNav:function(t,e){t.showNav=e}}};n["default"].use(c["a"]);var ee=new c["a"].Store({state:{a:10},getters:{sum:function(t){return t.a*t.a}},mutations:{add:function(t){t.a++}},actions:{},modules:{cart:Zt,user:Wt,common:te}}),re=ee;n["default"].use(f["a"]);var ne=new f["a"]({mode:"history",routes:[{path:"/",redirect:"/home"},{name:"home",path:"/home",component:q},{path:"/discover",redirect:"/discover/man"},{path:"/discover/:cat",component:ot},{path:"/cart",component:lt,meta:{requiresAuth:!0}},{path:"/login",component:U},{path:"/reg",component:C},{path:"/mine",component:Y,meta:{requiresAuth:!0}},{path:"/search",component:Et},{path:"/goods/:id",name:"goods",props:!0,component:ht,beforeEnter:function(t,e,r){r()}},{path:"/notfound",component:qt},{path:"*",redirect:"/notfound"}]});ne.beforeEach((function(t,e,r){if(t.meta.requiresAuth){var n=re.state.user.userInfo;n?(r(),ne.app.$request.get("/user/verify",{},{headers:{Authorization:n.authorization}}).then((function(e){400===e.code&&(ne.push({path:"/login",query:{targetUrl:t.fullPath}}),re.commit("user/logout"))}))):ne.push({path:"/login",query:{targetUrl:t.fullPath}})}else r()})),ne.beforeResolve((function(t,e,r){r()})),ne.afterEach((function(t,e){}));var oe=ne;r("0fae");n["default"].use(Yt.a),n["default"].prototype.$request=$,n["default"].prototype.baseUrl=y,new n["default"]({router:oe,store:re,render:function(t){return t(m)}}).$mount("#app")},"6e34":function(t,e,r){"use strict";r("7e7b")},"7bb1":function(t,e,r){},"7e7b":function(t,e,r){},"85ec":function(t,e,r){},"878b":function(t,e,r){"use strict";r("919a")},"919a":function(t,e,r){},"97a8":function(t,e,r){"use strict";r("b1e2")},b1e2:function(t,e,r){},d6db:function(t,e,r){"use strict";r("e67a")},e67a:function(t,e,r){}});
//# sourceMappingURL=app.ad09b47b.js.map