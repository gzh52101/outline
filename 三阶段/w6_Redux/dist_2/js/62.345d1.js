(self.webpackChunkw5_reactrouter=self.webpackChunkw5_reactrouter||[]).push([[62],{1062:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>P});var s=a(7294),n=(a(5688),a(5977)),i=(a(7532),a(3732)),l=(a(562),a(1230)),o=(a(2194),a(5746)),c=(a(6653),a(8290)),r=(a(3266),a(1577)),m=(a(3568),a(4210)),h=a(9602),p=a(9101),d=a(3171);class g extends s.Component{constructor(...e){super(...e),this.state={page:1,size:10,list:[],total:0,selectedRowKeys:[]},this.getData=async()=>{const{page:e,size:t}=this.state,{data:a}=await h.ZP.get("/class",{page:e,size:t});console.log("list",a),this.setState({list:a.result,total:a.total})},this.goto=e=>{const{history:t}=this.props;t.push({pathname:e})},this.editItem=e=>{this.props.history.push({pathname:`/class/edit/${e}`,search:"a=10&b=20",state:{c:30,d:40}})},this.removeItem=async e=>{204===(await h.ZP.delete("/class/"+e)).code&&(this.setState({list:this.state.list.filter((t=>t._id!==e)),total:this.state.total-1}),m.ZP.success("数据删除成功"))},this.removeClasses=async()=>{const{selectedRowKeys:e}=this.state;204===(await h.ZP.delete("/class",{ids:e})).code&&(this.setState({list:this.state.list.filter((t=>!e.includes(t._id))),total:this.state.total-e.length}),m.ZP.success("数据删除成功"))}}componentDidMount(){console.log("List.props",this.props),this.getData()}render(){const{list:e,total:t}=this.state,a=[{title:"#",width:10,render:(e,t,a)=>`${a+1}`},{title:"班级名称",dataIndex:"name"},{title:"学科",dataIndex:"category"},{title:"城市",dataIndex:"city"},{title:"操作",dataIndex:"_id",width:30,render:(e,t,a)=>s.createElement(s.Fragment,null,s.createElement(r.Z.Group,{size:"small"},s.createElement(r.Z,{type:"primary",ghost:!0,onClick:this.editItem.bind(this,e)},"编辑"),s.createElement(c.Z,{title:"确实删除",onConfirm:this.removeItem.bind(this,e)},s.createElement(r.Z,{type:"danger",ghost:!0},"删除"))))}],n={type:"checkbox",onChange:(e,t)=>{console.log("selects=",e,t),this.setState({selectedRowKeys:e})}},m={total:t,showTotal:(e,t)=>(console.log("total",e,t),`共${e}条`),onChange:(e,t)=>{this.setState({page:e},(()=>{this.getData()}))}};return s.createElement("div",null,s.createElement(l.Z,{gutter:20},s.createElement(o.Z,{span:12}),s.createElement(o.Z,{span:12,style:{textAlign:"right"}},s.createElement(r.Z,{type:"primary",style:{marginRight:5},icon:s.createElement(p.Z,null),onClick:this.goto.bind(this,"/class/add")},"添加"),s.createElement(r.Z,{type:"danger",icon:s.createElement(d.Z,null),onClick:this.removeClasses},"批量删除"))),s.createElement(i.Z,{style:{marginTop:10},rowKey:"_id",dataSource:e,columns:a,rowSelection:n,pagination:m}))}}const u=g;a(3337);var y=a(5669),Z=(a(7557),a(2482)),E=(a(1816),a(5779));class C extends s.Component{constructor(...e){super(...e),this.state={categories:[],cities:[]},this.onFinish=async e=>{console.log("onFinish",e),201===(await h.ZP.post("/class",e)).code&&(m.ZP.success("添加成功"),this.props.history.push("/class/list"))},this.getCategory=async()=>{const{data:e}=await h.ZP.get("/category",{total:!1,size:100});this.setState({categories:e})},this.getCity=async()=>{const{data:e}=await h.ZP.get("/city",{total:!1,size:100});this.setState({cities:e})}}componentDidMount(){this.getCategory(),this.getCity()}render(){const{cities:e,categories:t}=this.state;return s.createElement("div",null,s.createElement("h1",null,"添加班级"),s.createElement(Z.Z,{labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",onFinish:this.onFinish,initialValues:{name:"",city:"广州",category:"HTML5"}},s.createElement(Z.Z.Item,{label:"班级名称",name:"name",rules:[{required:!0,message:"请填写班级名称"}]},s.createElement(E.Z,null)),s.createElement(Z.Z.Item,{label:"城市",name:"city"},s.createElement(y.Z,null,e.map((e=>s.createElement(y.Z.Option,{key:e._id,value:e.name},e.name))))),s.createElement(Z.Z.Item,{label:"学科",name:"category"},s.createElement(y.Z,null,t.map((e=>s.createElement(y.Z.Option,{key:e._id,value:e.name},e.name))))),s.createElement(Z.Z.Item,{wrapperCol:{offset:4}},s.createElement(r.Z,{type:"primary",htmlType:"submit"},"添加"))))}}const w=C;a(7673);class v extends s.Component{constructor(...e){super(...e),this.state={categories:[],cities:[],classData:{}},this.onFinish=async e=>{console.log("onFinish",e);const{_id:t}=this.state.classData;201===(await h.ZP.put("/class/"+t,e)).code&&(m.ZP.success("修改成功"),this.props.history.push("/class/list"))},this.getCategory=async()=>{const{data:e}=await h.ZP.get("/category",{total:!1,size:100});this.setState({categories:e})},this.getCity=async()=>{const{data:e}=await h.ZP.get("/city",{total:!1,size:100});this.setState({cities:e})},this.getData=async()=>{const{id:e}=this.props.match.params,{data:t}=await h.ZP.get("/class/"+e);this.setState({classData:t})}}componentDidMount(){console.log("Eidt.props",this.props),this.getCategory(),this.getCity(),this.getData()}render(){const{cities:e,categories:t,classData:a}=this.state,n=[{name:"name",value:a.name},{name:"city",value:a.city},{name:"category",value:a.category}];return s.createElement("div",null,s.createElement("h1",null,"修改班级信息"),s.createElement(Z.Z,{labelCol:{span:4},wrapperCol:{span:14},layout:"horizontal",onFinish:this.onFinish,fields:n},s.createElement(Z.Z.Item,{label:"班级名称",name:"name",rules:[{required:!0,message:"请填写班级名称"}]},s.createElement(E.Z,{value:!0})),s.createElement(Z.Z.Item,{label:"城市",name:"city"},s.createElement(y.Z,null,e.map((e=>s.createElement(y.Z.Option,{key:e._id,value:e.code},e.name))))),s.createElement(Z.Z.Item,{label:"学科",name:"category"},s.createElement(y.Z,null,t.map((e=>s.createElement(y.Z.Option,{key:e._id,value:e.name},e.name))))),s.createElement(Z.Z.Item,{wrapperCol:{offset:4}},s.createElement(r.Z,{type:"primary",htmlType:"submit"},"修改"))))}}const b=v;class I extends s.Component{render(){const{location:e,match:t}=this.props;return console.log(e.pathname,t.url,t.path),s.createElement("div",null,"班级管理",s.createElement(n.AW,{path:t.path+"/list",component:u}),s.createElement(n.AW,{path:t.path+"/add",component:w}),s.createElement(n.AW,{path:t.path+"/edit/:id",component:b}))}}const P=I}}]);